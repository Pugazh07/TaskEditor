(this["webpackJsonptask-editor"]=this["webpackJsonptask-editor"]||[]).push([[0],{139:function(e,t,s){"use strict";s.r(t);var a=s(2),n=s(14),i=s.n(n),l=s(69),c=s(21),r=(s(79),s(29)),o=s(30),d=s(37),k=s(36),u=s(66),j=s.n(u),_=s(8),p=s(27),m=s.n(p),h=(s(55),"LOGIN"),b="ADD_TASK",g=s(9),O=s.n(g),T=s(44),f=s.n(T),v=s(45),x=s.n(v),D=s(4),N=function(e){console.log("TaskEditor entered ",e.taskDetails),console.log("User ",e.taskDetails.assigned_user);var t={},s={};return e.deleteHandler||(t={display:"none"},s={flexDirection:"row-reverse"}),Object(D.jsx)("div",{children:Object(D.jsxs)("form",{className:O.a.TaskEditor,children:[Object(D.jsxs)("div",{className:O.a.TaskLabel,children:[Object(D.jsx)("label",{htmlFor:"task_msg",children:"Task Description"}),Object(D.jsx)("input",{id:"task_msg",type:"text",onChange:function(t){return e.descHandler(t)},value:e.taskDetails.task_msg})]}),Object(D.jsxs)("div",{className:O.a.DateTime,children:[Object(D.jsxs)("div",{className:O.a.TaskLabel,children:[Object(D.jsx)("label",{htmlFor:"task_date",children:"Date"}),Object(D.jsx)("i",{className:"far fa-calendar-alt"}),Object(D.jsx)(x.a,{id:"task_date",className:O.a.DatePicker,selected:e.taskDetails.task_date,onChange:function(t){return e.dateHandler(t)}})]}),Object(D.jsxs)("div",{className:O.a.TaskLabel,children:[Object(D.jsx)("label",{htmlFor:"task_time",children:"Time"}),Object(D.jsx)("i",{className:"far fa-clock"}),Object(D.jsx)(f.a,{id:"task_time",step:30,className:O.a.TimePicker,onChange:function(t){return e.timeHandler(t)},value:e.taskDetails.task_time})]})]}),Object(D.jsx)("div",{children:Object(D.jsxs)("div",{className:O.a.TaskLabel,children:[Object(D.jsx)("label",{htmlFor:"user",children:"Assign User"}),Object(D.jsx)("select",{id:"user",children:Object(D.jsx)("option",{value:e.taskDetails.assigned_user,children:e.taskDetails.assigned_user})})]})}),Object(D.jsxs)("div",{className:O.a.Buttons,style:s,children:[Object(D.jsx)("i",{className:"far fa-trash-alt",onClick:e.deleteHandler,style:t}),Object(D.jsxs)("div",{className:O.a.SaveCancel,children:[Object(D.jsx)("span",{onClick:e.cancelled,children:"Cancel"}),Object(D.jsx)("button",{className:"btn btn-success",type:"submit",onClick:e.saved,children:"Save"})]})]})]})})},y=(s.p,s(22)),H=s.n(y),E=function(e){var t=e.task.task_date.split("-");console.log("Task ",t);var s=t[2]+"/"+t[1]+"/"+t[0];return Object(D.jsxs)("div",{className:H.a.Task,children:[Object(D.jsx)("img",{src:e.task.user_icon,alt:"Image"}),Object(D.jsxs)("div",{className:H.a.Details,children:[Object(D.jsx)("span",{className:H.a.task_msg,children:e.task.task_msg}),Object(D.jsx)("span",{children:s})]}),Object(D.jsxs)("div",{className:H.a.editOptions,children:[Object(D.jsx)("i",{className:"fas fa-pen",onClick:function(){return e.editTypeHandler("edit",e.task.id)}}),Object(D.jsxs)("div",{className:H.a.Button,children:[Object(D.jsx)("i",{className:"fas fa-bell"}),Object(D.jsx)("i",{className:"fas fa-check",onClick:function(t){var s=alert("Mark this task as complete!");e.saved(t,s)}})]})]})]})},C=function(e){Object(d.a)(s,e);var t=Object(k.a)(s);function s(){var e;Object(r.a)(this,s);for(var a=arguments.length,n=new Array(a),i=0;i<a;i++)n[i]=arguments[i];return(e=t.call.apply(t,[this].concat(n))).state={type:null,assigned_user:null,id:null,task_msg:"",task_date:"",task_time:"",is_completed:0},e.editTypeHandler=function(t){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a={};if(a.type=t,"new"===t){var n=new Date,i=3600*n.getHours()+60*n.getMinutes();a.task_msg="Follow up",a.task_date=n,a.task_time=i,a.is_completed=0,a.assigned_user=e.props.user}if("edit"===t){console.log("Edit task",s);var l=e.props.taskList.filter((function(e){return e.id===s}));console.log(l),a.task_msg=l[0].task_msg,a.task_date=new Date(l[0].task_date),a.task_time=l[0].task_time,a.is_completed=l[0].is_completed,a.assigned_user=l[0].assigned_user}setTimeout(e.setState(Object(_.a)(Object(_.a)({},a),{},{id:s})),4e3)},e.descHandler=function(t){e.setState({task_msg:t.target.value})},e.dateHandler=function(t){e.setState({task_date:t})},e.timeHandler=function(t){e.setState({task_time:t})},e.taskSaveHandler=function(t){t.preventDefault();var s=e.state.task_date.getFullYear()+"-"+(e.state.task_date.getMonth()+1).toString().padStart(2,0)+"-"+e.state.task_date.getDate().toString().padStart(2,0);console.log("date ",s);var a="",n="POST";"edit"===e.state.type&&(n="PUT",a="/"+e.state.id,console.log("url",a)),fetch("https://stage.api.sloovi.com/task/lead_58be137bfde045e7a0c8d107783c4598"+a,{method:n,headers:{Authorization:"Bearer "+e.props.token,Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({assigned_user:e.props.user,task_date:s,task_time:e.state.task_time,is_completed:e.state.is_completed,time_zone:19800,task_msg:e.state.task_msg})}).then((function(t){console.log(t),t.json().then((function(t){console.log(t),e.setState({type:null,assigned_user:null,id:null,task_msg:"",task_date:"",task_time:"",is_completed:0}),e.getAllTasks()}))})).catch((function(e){console.log(e)}))},e.cancelHandler=function(){e.setState({type:null,assigned_user:null,id:null,task_msg:"",task_date:"",task_time:"",is_completed:0}),e.getAllTasks()},e.deleteHandler=function(t){t.preventDefault();var s=e.state.id;console.log("delete id ",s),fetch("https://stage.api.sloovi.com/task/lead_58be137bfde045e7a0c8d107783c4598/"+s,{method:"DELETE",headers:{Authorization:"Bearer "+e.props.token,Accept:"application/json","Content-Type":"application/json"}}).then((function(t){console.log(t),t.json().then((function(t){console.log(t),e.getAllTasks()}))}))},e.getAllTasks=function(){fetch("https://stage.api.sloovi.com/task/lead_58be137bfde045e7a0c8d107783c4598",{method:"GET",headers:{Authorization:"Bearer "+e.props.token,Accept:"application/json","Content-Type":"application/json"}}).then((function(t){console.log(t),t.json().then((function(t){console.log(t.results),e.props.onGetAllTask(t.results)}))}))},e.componentDidMount=function(){e.getAllTasks()},e}return Object(o.a)(s,[{key:"render",value:function(){var e=this;console.log("Tasks.js ",this.state);var t=null;return"new"===this.state.type&&(t=Object(D.jsx)(N,{taskDetails:this.state,descHandler:this.descHandler,dateHandler:this.dateHandler,timeHandler:this.timeHandler,saved:this.taskSaveHandler,cancelled:this.cancelHandler})),Object(D.jsxs)("div",{className:m.a.Tasks,children:[Object(D.jsxs)("div",{className:m.a.TasksCounter,children:[Object(D.jsxs)("div",{className:m.a.TasksCount,children:["TASKS ",Object(D.jsx)("span",{children:this.props.taskList.length})]}),Object(D.jsx)("div",{className:m.a.TasksButton,onClick:function(){return e.editTypeHandler("new")},children:"+"})]}),t,this.props.taskList.map((function(t,s){return e.state.id!==t.id?Object(D.jsx)("div",{children:Object(D.jsx)(E,{editTypeHandler:e.editTypeHandler,saved:e.taskSaveHandler,task:t})},t.id):"edit"===e.state.type?Object(D.jsx)("div",{children:Object(D.jsx)(N,{taskDetails:e.state,descHandler:e.descHandler,dateHandler:e.dateHandler,timeHandler:e.timeHandler,saved:e.taskSaveHandler,cancelled:e.cancelHandler,deleteHandler:e.deleteHandler})},t.id):void 0}))]})}}]),s}(a.Component),I=Object(c.b)((function(e){return{user:e.user,token:e.token,taskList:e.taskList,numOfTasks:e.maxId,showTaskEditor:e.showTaskEditor,pageRefresh:e.refresh}}),(function(e){return{onGetAllTask:function(t){return e({type:"GETALL",tasks:t})},onAddTask:function(){return e({type:b,task:{name:"Puagzh"}})},onDelTask:function(){return e({type:"DEL_TASK"})}}}))(C),L=function(e){Object(d.a)(s,e);var t=Object(k.a)(s);function s(){return Object(r.a)(this,s),t.apply(this,arguments)}return Object(o.a)(s,[{key:"render",value:function(){return Object(D.jsx)("div",{className:j.a.App,children:Object(D.jsx)(I,{})})}}]),s}(a.Component),A=Object(c.b)(null,(function(e){return{onLogin:function(t,s){return e({type:h,getToken:t,getUserId:s})}}}))(L),S=function(e){e&&e instanceof Function&&s.e(3).then(s.bind(null,145)).then((function(t){var s=t.getCLS,a=t.getFID,n=t.getFCP,i=t.getLCP,l=t.getTTFB;s(e),a(e),n(e),i(e),l(e)}))},w={user:"user_979f2358c7554c809d0d688943b8966b",token:"eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpYXQiOjE2MjE2MTg1ODEsIm5iZiI6MTYyMTYxODU4MSwianRpIjoiZWVhMDIxMjMtNDg1MC00ZjJhLTg0YzEtYmM2ZjgxYTZiYzdkIiwiaWRlbnRpdHkiOnsibmFtZSI6IlNhcmF2YW5hbiAyMyBUZXN0aW5nIiwiZW1haWwiOiJzbWl0aGNoZXJ5bEB5YWhvby5jb20iLCJ1c2VyX2lkIjoidXNlcl85NzlmMjM1OGM3NTU0YzgwOWQwZDY4ODk0M2I4OTY2YiIsImNvbXBhbnlfaWQiOiJjb21wYW55X2RmMTUzNTU4NGE4YzRjNmE5OGZjOTM5Y2UxMDVjMWE2IiwiaWNvbiI6Imh0dHBzOi8vd3d3LmdyYXZhdGFyLmNvbS9hdmF0YXIvYWRlNTIwN2Q1YjQyYzVkYTU5NWVkZDc4MTg5ZDc3MTciLCJieV9kZWZhdWx0Ijoib3V0cmVhY2gifSwiZnJlc2giOmZhbHNlLCJ0eXBlIjoiYWNjZXNzIn0.dU1KnrYa9d56nsZq6_9DZoDzZ5eP1WTFuvr2O_K7tQI",taskList:[],refresh:!1},M=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case b:return e;case h:return console.log("Reducer",t.getToken.results.token),console.log("Reducer",t.getUserId.results.id),Object(_.a)(Object(_.a)({},e),{},{token:t.getToken.results.token,user:t.getUserId.results.id});case"GETALL":var s=t.tasks.sort((function(e,t){return console.log(Date.parse(new Date(t.task_date))+t.task_time-(Date.parse(new Date(e.task_date))+e.task_time)),Date.parse(new Date(t.task_date))+t.task_time-(Date.parse(new Date(e.task_date))+e.task_time)}));return Object(_.a)(Object(_.a)({},e),{},{taskList:s,refresh:!e.refresh})}return e},Y=Object(l.a)(M);i.a.render(Object(D.jsx)(c.a,{store:Y,children:Object(D.jsx)(A,{})}),document.getElementById("root")),S()},22:function(e,t,s){e.exports={Task:"task_Task__2g_rc",Details:"task_Details__3mlOM",task_msg:"task_task_msg__2E3jE",editOptions:"task_editOptions__3MiGV",Button:"task_Button__30Apq"}},27:function(e,t,s){e.exports={TasksCounter:"Tasks_TasksCounter__17UsH",TasksCount:"Tasks_TasksCount__3JZon",TasksButton:"Tasks_TasksButton__PhRg9"}},66:function(e,t,s){e.exports={App:"App_App__Y8ULG"}},79:function(e,t,s){},9:function(e,t,s){e.exports={TaskEditor:"taskEditor_TaskEditor__ETElb",TaskLabel:"taskEditor_TaskLabel__zPz8n",DateTime:"taskEditor_DateTime__1SQdk",Buttons:"taskEditor_Buttons__3qvaZ",SaveCancel:"taskEditor_SaveCancel__1UUAG",DatePicker:"taskEditor_DatePicker__3GF1O",TimePicker:"taskEditor_TimePicker__3sx1Q"}}},[[139,1,2]]]);
//# sourceMappingURL=main.0a35050a.chunk.js.map